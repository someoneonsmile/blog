# vim 技巧

|    date    |    tag     |
|    ---     |    ---     |
| 2020-11-05 | vim/repeat |

## vim 重复输入

自动输入指定个数的重复数字， 例如: `10a=`, `2yl`, `2yy`, `2yw`

## `<c-r>` 快捷键

`normal` 模式下为重做修改的内容

`insert` 模式为输出寄存器中的内容

- `<c-r><c-w>`: 命令行下输入光标下单词

- `<c-r>/`: 输入上次查找的内容

- `<c-r>:`: 输入上次执行的 `Ex` 命令

- `<c-r>*`: 输入寄存器中的内容

## 查找替换

`:s//otherthing`: `//` 查找域留空会重用上次的查找模式

`:s//\=@*`: `\=@*` 会引用寄存器中的内容. 重用上次的查找, 并替换为剪贴板中的内容

`:s//\=submatch(0)-1/g`: `\=` 可以执行 `vim` 脚本表达式

`&`: 在当前行执行上次的替换命令, 相当于 `:s//~/`, 相同的查找模式, 相同的替换字符, 不记住标记位

`g&`: 在所有行执行上次的替换命令, 相当于 `:%s//~/&`, 相同的查找模式, 相同的替换字符, 相同的标志位

`:&&`: 在当前行上执行上次的替换, 第一个 `&` 作为 `Ex` 命令的组成部分, 第二个 `&` 会重用上次 `:s` 的标志位

`:%S/{man,dog}/{dog,man}/g`, `Abolish.vim` 插件, 可轻松实现单词交换

`/nostart \zs pattern \ze noend`: `\zs` 用于指定匹配开始边界, `\ze` 用于指定匹配结束边界

`:%s//~/gc`: `c` 标识符会在每次替换前进行确认

## global 命令

`global` 可对匹配的所有行执行操作, 可配合 `normal` 命令

> `:g/^reg$/normal .`
> `:g/^reg$/normal .`

`:vglobal`(`:v`), `:global!`(`:g!`) 可对不匹配的所有行执行操作

## `:t` `:m` 复制和移动行

结合 `global` 命令可将匹配的行快速的移动或复制

## `o` 切换高亮选区的活动端

## 不重启 `vim` 的情况下，重载配置文件

`:so %` or `:so ~/.vimrc`

## vim 配置文件结构

- device.vim
- gui.vim
- set.vim
- keymap.vim
- command.vim
- autocommand.vim
- function.vim
- plugin.vim
